
//羁绊信息
message LinkPB{
	required int32 link_no = 1;  // 羁绊编号
	optional bool is_activation = 2;  // 是否激活
}

//武将信息
message HeroPB
{
    required int32 hero_no = 1;
    optional int32 level = 2;
    optional int32 exp = 3;
    optional int32 break_level = 4;
    repeated LinkPB links = 5;
}

message Skill{
	required int32 id = 1;  //技能ID
	repeated int32 buffs = 2;  //技能buff组
}

message BattleUnit{
	required int32 no = 1;  //战斗单位ID
	optional int32 quality = 2;  //战斗单位品质
	optional Skill normal_skill = 3;  //战斗单位普通技能
	optional Skill rage_skill = 4;  //战斗单位怒气技能

	optional float hp = 5; // 战斗单位血量
	optional float atk = 6; //战斗单位攻击
	optional float physical_def = 7;//战斗单位物理防御
	optional float magic_def = 8;  //战斗单位魔法防御
	optional float hit = 9; //战斗单位命中率
	optional float dodge = 10;  //战斗单位闪避率
	optional float cri = 11;  //战斗单位暴击率
	optional float cri_coeff = 12; //战斗单位暴击伤害系数
	optional float cri_ded_coeff = 13;  //战斗单位暴伤减免系数
	optional float block = 14;  //战斗单位格挡率

	optional float base_hp = 18; // 战斗单位基础血量
	optional float base_atk = 19; //战斗单位基础攻击
	optional float base_physical_def = 20;//战斗单位基础物理防御
	optional float base_magic_def = 21;  //战斗单位基础魔法防御
	optional float base_hit = 22; //战斗单位基础命中率
	optional float base_dodge = 23;  //战斗单位基础闪避率
	optional float base_cri = 24;  //战斗单位基础暴击率
	optional float base_cri_coeff = 25; //战斗单位基础暴击伤害系数
	optional float base_cri_ded_coeff = 26;  //战斗单位基础暴伤减免系数
	optional float base_block = 27;  //战斗单位基础格挡率

	optional int32 level = 28;
	optional int32 break_level = 29;

	optional bool is_boss = 15; //是否是boss
	repeated Skill break_skill = 16; //突破技能
	optional int32 position = 17; //位置
}

message BattleUnitGrop{
	repeated BattleUnit group = 1;
}

message Stage{
	required int32 stage_id = 1;  //关卡编号
	optional int32 attacks = 2;  //攻击次数
	optional int32 state = 3;  //关卡状态 -1:开启没打过 0：输  1：赢
}

message StageAward{
	required int32 chapter_id = 1; //章节编号
	repeated int32 award = 2;  //奖励数组 -1:奖励没达成 0：奖励达成没有领取 1：已经领取
	optional int32 dragon_gift = 3; //龙纹奖励 -1:奖励没达成 0：奖励达成没有领取 1：已经领取
}

message LineUp{
	required int32 pos = 1;  // 位置
	optional int32 hero_id = 2;  //英雄编号
}

message Unparalleled{
	required int32 id = 1; //无双ID
	repeated Skill unpar = 2; // 无双技能
	optional bool activate = 3; //是否激活
}

message FinancePB{
    optional int32 coin = 1;
    optional int32 gold = 2;
    optional int32 hero_soul = 3;
    optional int32 junior_stone = 4;
    optional int32 middle_stone = 5;
    optional int32 high_stone = 6;
}


//商城请求 command:501/502/503/504
message ShopRequest
{
    required int32 id = 1; // 对应shop配置表中商品编号
    optional int32 num = 2; // 抽取次数
}
//商城返回 command:501/502/503/504
message ShopResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse consume = 2;
    optional GameResourcesResponse gain = 3;
}
// 装备碎片
message EquipmentChipPB{
	required int32 equipment_chip_no = 1;  //编号
	required int32 equipment_chip_num = 2;  //数量
}

// 返回装备碎片列表
message GetEquipmentChipsResponse
{
    repeated EquipmentChipPB equipment_chips = 1;
}

//邮件基本信息
message Mail_PB
{
    required string mail_id = 1; // ID
    optional int32 sender_id = 2; //发件人ID
    optional string sender_name = 3; //发件人
    optional int32 receive_id = 4; //收件人ID
    optional string receive_name = 5; //收件人
    optional string title = 6; //标题
    optional string content = 7; //邮件内容
    required int32 mail_type = 8; //邮件类型
    optional int32 send_time = 9; //发件时间
    optional bool is_readed = 10; //是否已读
    optional string prize = 11; //奖品
}

//汇总邮箱信息, command : 1301
message GetMailInfos
{
    repeated Mail_PB mails = 1;
}

//读邮件, command : 1302
message ReadMailRequest
{
    repeated string mail_ids = 1;
    optional int32 mail_type = 2;
}

//读邮件, command : 1302
message ReadMailResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse gain = 2;
}

//删除邮件, command : 1303
message DeleteMailRequest
{
    repeated string mail_id = 1;
}

//发送邮件, command: 1304
message SendMailRequest
{
    required Mail_PB mail = 1;
}

//接收邮件, command: 1305
message ReceiveMailResponse
{
    required Mail_PB mail = 1;
}


// 武将碎片
message HeroChipPB{
	required int32 hero_chip_no = 1;  //编号
	required int32 hero_chip_num = 2;  //数量
}

// 返回碎片列表 command:108
message GetHeroChipsResponse
{
    repeated HeroChipPB hero_chips = 1;
}

message CommonResponse
{
    required bool result = 1;  //处理结果 True：正确
    optional int32 result_no = 2;
    optional string message = 3;
}

// 数据集合
message GameResourcesResponse
{
    repeated HeroPB heros = 1;
    repeated EquipmentPB equipments = 2;
    repeated ItemPB items = 3;
    repeated HeroChipPB hero_chips = 4;
    repeated EquipmentChipPB equipment_chips = 5;
    optional FinancePB finance = 6;
}

// 游戏服登录 command：4
message GameLoginRequest{
	required string token = 1;
}

//返回结果
message GameLoginResponse{
     required CommonResponse res = 1;
     optional int32 id = 17;
     optional string nickname = 2;
     //等级
     optional int32 level = 3;
     optional int32 exp = 4;
     //金币
     optional int32 coin = 5;
     optional int32 gold = 6;
     optional int32 hero_soul = 7;
     optional int32 junior_stone = 8;
     optional int32 middle_stone = 9;
     optional int32 high_stone = 10;
     //抽取时间
     optional int32 fine_hero = 11;
     optional int32 excellent_hero = 12;
     optional int32 fine_equipment = 13;
     optional int32 excellent_equipment = 14;

     //other
     optional int32 stamina = 15;
     optional int32 pvp_times = 16;
     optional int32 vip_level = 18;
     optional int32 server_time = 19;
     optional bytes guild_id = 20;
}

// 请求全部装备 command：401
message GetEquipmentsRequest{
	required int32 type = 1; //请求装备类型 -1：一件 0：全部 1：武器 2：头盔 3：衣服 4：项链 5：饰品 6：宝物
	optional string id = 2;  //装备ID
}


// 装备强化 command: 402
message EnhanceEquipmentRequest{
	required string id = 1;  //装备ID
	optional int32 type = 2; //强化类型 1：强化 2：自动强化
	optional int32 num = 3;  //类型1使用：强化次数
}


// 装备合成 command:  403
message ComposeEquipmentRequest{
	required int32 no = 1;  //装备碎片No
}


// 装备锤炼 command:  404
message NobbingEquipmentRequest{
	required string id = 1; // 装备ID
}


// 装备熔炼 command:405
message MeltingEquipmentRequest{
	repeated string id = 1; // 装备ID
}


// 装备觉醒 command:406
message AwakeningEquipmentRequest
{
    required string ids = 1; // 装备ID
}

//武魂商城购买请求 command:506
message SoulShopRequest
{
    required int32 id = 1; // 对应shop配置表中商品编号
}
//获取武魂商城列表 command:507
message GetShopItemsResponse
{
    repeated int32 id = 1;
}
//武魂商城购买响应 command:506
message SoulShopResponse
{
    required CommonResponse res = 1;
    required GameResourcesResponse consume = 2;
    required GameResourcesResponse gain = 3;
}

// add_friend_common 好友
message FriendCommon{
	repeated int32 target_ids = 1;  // invitee id
}

// add friend response
message AddFriendResponse{
    required bool result = 1;      //result
}

// find friend by friend's player id or nickname
message FindFriendRequest{
    optional string id_or_nickname = 1;
}

//
message FindFriendResponse{
    optional int32  id = 1;
    optional string nickname = 2;
    optional int32 hero_no = 3;  //英雄编号
    optional int32 gift = 4;
    optional float power = 5;  // 战斗力
    optional float hp = 6;  //血
    optional float atk = 7;  //攻
    optional float physical_def = 8;  //物理防御
    optional float magic_def = 9;  //魔法防御

}

message GetPlayerFriendsRequest{

}

// character information
message CharacterInfo{
    optional int32 id = 1;
    optional string nickname = 2;
    optional int32 hero_no = 3;  //英雄编号
    optional int32 gift = 4;
    optional float power = 5;  // 战斗力
    optional float hp = 6;  //血
    optional float atk = 7;  //攻
    optional float physical_def = 8;  //物理防御
    optional float magic_def = 9;  //魔法防御
}

// player friend items
message GetPlayerFriendsResponse{
    optional int32 page_num = 1;
    repeated CharacterInfo friends = 2;
    repeated CharacterInfo blacklist = 3;
    repeated CharacterInfo applicant_list = 4;
}


//请求武将列表 command:101
message GetHerosResponse
{
    repeated HeroPB heros = 1;
}

//武将升级 command:103
message HeroUpgradeResponse
{
    required CommonResponse res = 1;
    optional int32 level = 2;
    optional int32 exp = 3;
}

//武将突破 command:104
message HeroBreakResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse consume = 2;
    optional int32 break_level = 3;
}

//武将献祭 command:105
message HeroSacrificeResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse gain = 2;
}

//武将合成 command:106
message HeroComposeResponse
{
    required CommonResponse res = 1;
    optional HeroPB hero = 2;
}

//武将出售 command:107
message HeroSellResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse gain = 2;
}

message ChatObjectInfo{
     required int32 id = 1;//角色id
     optional string nickname=2;//角色昵称
}

//登录 command:1001
message LoginToChatRequest{
	required ChatObjectInfo owner = 1;
}

// 发言
message ChatConectingRequest{
	required ChatObjectInfo owner = 1; // 发言角色信息
    required int32 channel = 2;//消息的频道  1.世界 2.公会 3.私聊 4.GM 5.系统通告 6.军团通告
    required string content = 3;//聊天内容
    optional ChatObjectInfo other = 4; // 私聊角色信息
    optional string guild_id = 5;//公会ID
}

//返回结果
message ChatResponse{
     required bool result = 1;
     optional string message = 2;
}

//推送聊天信息
message chatMessageResponse{
    required int32 channel = 1;//消息的频道  1.世界 2.公会 3.私聊 4.GM 5.系统通告 6.军团通告
	required ChatObjectInfo owner = 2;
    required string content = 5;//消息内容
}


// get level gift
message GetLevelGift{
	required int32 gift_id = 1;
}

message GetLevelGiftResponse{
	required bool result = 1;
    optional GameResourcesResponse gain = 2;
}

// 道具
message ItemPB{
	required int32 item_no = 1;  //道具编号
	required int32 item_num = 2;  //道具数量
}





message PlayerLoginRequest
{
    required string token = 1;
}

message CreatePlayerRequest{
     optional string nickname = 1;//角色昵称
}



message AccountInfo{
	required int32 type = 1;//注册类型 1.游客 2.帐号 3.绑定
	optional string user_name = 2; //用户名
	optional string password = 3;//密码
	optional AccountKey key = 4;
}

message AccountKey{
	required string key = 1; //服务器生成的KEY，标识机器
}

//返回结果
message AccountResponse{
     required bool result = 1;
     optional string message = 2;
     optional AccountKey key = 3;
}

// 登录 command:2
message AccountLoginRequest{
	required AccountKey key = 1;
	optional string user_name = 2; //用户名
	optional string password = 3;//密码
}

//注册 request: command:1，data:AccountInfo
//    response: AccountResponse

//登录 request: command:2, data:AccountLoginRequest
//    response: AccountResponse

//绑定 request: command:3, data:AccountInfo
//    response: AccountResponse



// get online gift
message GetOnlineGift{
    required int32 gift_id = 1;
}

message GetOnlineGiftResponse{
    required bool result = 1;
    optional GameResourcesResponse gain = 2;
}

message GetOnlineLevelGiftData{
    optional int32 online_time = 1;
    repeated int32 received_online_gift_id = 2;
    repeated int32 received_level_gift_id = 3;
}


//请求关卡信息 command:901
message StageInfoRequest{
	required int32 stage_id = 1; //关卡编号 0: 全部信息
}

//请求章节奖励信息 command:902
message ChapterInfoRequest{
	required int32 chapter_id = 1; //章节编号 0：全部信息
}

// 进入关卡战斗 command:903
message StageStartRequest{
	required int32 stage_id = 1; //关卡编号
	repeated LineUp lineup = 2; // 队形
	optional int32 unparalleled = 3; //无双技能ID
	optional int32 fid = 4; //好友ID
}

// 关卡结算 command:904
message StageSettlementRequest{
	required int32 stage_id = 1; //关卡编号
	required int32 result = 2;  //输赢
}





//格子装备
message SlotEquipment{
	required int32 no = 1; // 装备格子编号
	optional EquipmentPB equ = 2; // 装备
}


// 阵容格子
message LineUpSlot{
	required int32 slot_no = 1; // 位置编号
	optional bool activation = 2; //是否激活
	optional HeroPB hero = 3; //英雄
	repeated SlotEquipment equs = 4; //装备
}


// 取得阵容 701

//所有返回
message LineUpResponse{
	repeated LineUpSlot slot = 1;
	repeated LineUpSlot sub = 2;
	optional CommonResponse res = 3;
}

// 更换装备 703
message ChangeEquipmentsRequest
{
	required int32 slot_no = 1; // 位置编号
    optional int32 no = 2;  //装备格子编号
    optional string equipment_id = 3; // 装备ID
}


// 更换武将 702
message ChangeHeroRequest{
	required int32 slot_no = 1; // 位置编号
	optional int32 change_type = 2; // 更换类型：0：阵容 1：助威
	optional int32 hero_no = 3; // 英雄编号
}

// 上次吃酒席时间 command：821
message GetEatTimeResponse{
	required CommonResponse res = 1;
	optional int32 eat_time = 2;
}

// 吃酒席 command：820
message EatFeastResponse{
	required int32 res = 1; //1:已经吃过 2 成功吃 3还没到时间
}


//请求关卡信息返回 command:901
message StageInfoResponse{
	repeated Stage stage = 1;

}

//请求章节奖励信息返回 command:902
message ChapterInfoResponse{
	repeated StageAward stage_award = 1;
}

// 进入关卡战斗返回 command:903
message StageStartResponse{
	required CommonResponse res = 1;
	optional int32 drop_num = 2;  //掉落数量
	repeated BattleUnit red = 4; //红方数据 自己
	repeated BattleUnitGrop blue = 5; //对方数据
	optional BattleUnit friend = 6; // 好友
	optional Skill monster_unpara = 7; // 怪物无双
}

// 关卡结算返回 command:904
message StageSettlementResponse{
    required CommonResponse res = 1;
	optional GameResourcesResponse drops = 2;
}

// 请求队形信息: 905
message FormationResponse{
	repeated LineUp lineup = 1; // 队形
}

// 请求无双信息：906
message UnparalleledResponse{
	repeated Unparalleled unpar =  1; //无双信息
}

// 获取签到初始化信息:1400
message GetSignInResponse{
    repeated int32 days = 1; // 签到日期
    required int32 continuous_sign_in_days = 2; //连续签到天数
    repeated int32 continuous_sign_in_prize = 3; //已经获取的连续签到奖励，保存列表[7，15，25]
    required int32 repair_sign_in_times = 4; //补充签到次数
}

// 补签:1403
message RepairSignInRequest{
    required int32 day = 1;
}

// 签到，补签:1401，1403
message SignInResponse{
    required CommonResponse res = 1;
    optional GameResourcesResponse gain = 2;
}

// 连续签到获取额外奖励:1402
message ContinuousSignInRequest{
    required int32 sign_in_days = 1; //连续登录天数: 7, 15 , 25
}

// 连续签到返回奖励:1402
message ContinuousSignInResponse{
    required CommonResponse res = 1;
    optional GameResourcesResponse gain = 2;
}


//武将升级，使用道具 command:103
message HeroUpgradeWithItemRequest
{
    required int32 hero_no = 1;
    required int32 exp_item_no = 2;
    required int32 exp_item_num = 3;
}

//武将突破 command:104
message HeroBreakRequest
{
    required int32 hero_no = 1;
}

//武将献祭 command:105
message HeroSacrificeRequest
{
    repeated int32 hero_nos = 1;
}

//武将合成 command:106
message HeroComposeRequest
{
    required int32 hero_chip_no = 1;
}

//武将出售 command:107
message HeroSellRequest
{
    repeated int32 hero_nos = 1;
}

// 请求全部道具 command：301
message GetItemsResponse{
	repeated ItemPB items = 1;
}

// 道具使用返回 command：302
message ItemUseResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse gain = 2;
}
message GuildCommonResponse
{
    required bool result = 1;  //处理结果 True：正确
    optional int32 result_no = 2;
    optional bytes message = 3;
}

message GuildInfo
{
    required string g_id = 1;    //id
    required bytes name = 2;    //名
    required int32 p_num = 3;   //人数
    required int32 level = 4;   //等级
    required int32 exp = 5;     //经验
    required int32 fund = 6;    //资金
    required bytes call = 7;    //公告
    required int32 record = 8;  //战绩
    required int32 my_position = 9; //我的职位

}

message RoleInfo
{
    required int32 p_id = 1;    //id
    required bytes name = 2;    //名
    required int32 level = 3;   //等级
    required int32 vip_level = 4;   //vip等级
    required int32 fight_power = 5;   //战斗力
}

message RoleInfo1
{
    required int32 p_id = 1;    //id
    required bytes name = 2;    //名
    required int32 level = 3;   //等级
    required int32 position = 4;   //职位
    required int32 all_contribution = 5;   //总贡献
    required int32 k_num = 6;   //杀敌数
}

message GuildRank
{
    required string g_id = 1;    //id
    required int32 rank = 2;    //排名
    required bytes name = 3;    //名
    required int32 level = 4;   //等级
    required bytes president = 5;   //会长
    required int32 p_num = 6;   //人数
    required int32 record = 7;   //战绩
}

////////////////////////////////////////////////////

// 创建公会 command：801
message CreateGuildRequest{
	required bytes name = 1;  //公会名
}

// 加入公会 command：802
message JoinGuildRequest{
	required string g_id = 1;  //公会id
}
message JoinGuildResponse{
	required bool result = 1;  //处理结果 True：正确
    optional int32 result_no = 2;
    optional bytes message = 3;
    repeated int32 spare_time = 4;
}

// 修改公告 command：804
message EditorCallRequest{
	required bytes call = 1;  //公告内容
}

// 处理加会申请 command：805
message DealApplyRequest{
	repeated int32 p_ids = 1;  //申请玩家id
	required int32 res_type = 2;  // 结果：1同意，2不同意,3清空
}
message DealApplyResponse{
    required bool result = 1;  //处理结果 True：正确
    optional int32 result_no = 2;
    optional bytes message = 3;
    repeated int32 p_ids = 4;
}

// 转让会长 command：806 change_president_806
message ChangePresidentRequest{
	required int32 p_id = 1;  //目标玩家id
}

// 踢出公会 command：807
message KickRequest{
	repeated int32 p_ids = 1;  //目标玩家ids
}

// 晋升返回 command：808
message PromotionResponse{
	required bool result = 1;
    optional int32 result_no = 2;
    optional bytes message = 3;
    optional int32 p_id = 4;
}

// 膜拜 command：809
message WorshipRequest{
	required int32 w_type = 1;  //膜拜类型
}

// 获取公会信息 command：812
message GuildInfoProto{
	required bool result = 1;  //处理结果
    optional GuildInfo guild_info = 2;
    optional bytes message = 3;
}

// 获取申请列表 command：813
message ApplyListProto{
	required bool result = 1;  //处理结果
    repeated RoleInfo role_info = 2;
    optional bytes message = 3;
}

// 获取公会成员列表 command：811
message GuildRoleListProto{
	required bool result = 1;  //处理结果
    repeated RoleInfo1 role_info = 2;
    optional bytes message = 3;
}

// 获取公会排行列表 command：810
message GuildRankProto{
	required bool result = 1;  //处理结果
    repeated GuildRank guild_rank = 2;
    optional bytes message = 3;
}

// 请求全部装备返回 command：401
message GetEquipmentResponse{
	required CommonResponse res = 1;
	repeated EquipmentPB equipment = 2;
}

// 装备强化返回 command: 402
message EnhanceEquipmentResponse{
	required CommonResponse res = 1;
	repeated EnhanceDataFormat data= 2;
}

// 装备合成返回 command:  403
message ComposeEquipmentResponse{
	required CommonResponse res = 1;
	optional EquipmentPB equ = 2;  //装备
}

// 装备锤炼返回 command:  404
message NobbingEquipmentResponse{
	required CommonResponse res = 1;
	optional EquipmentPB equ = 2;  //装备
	optional GameResourcesResponse cgr = 3; // 消耗
}


// 装备熔炼返回 command:405
message MeltingEquipmentResponse{
	required CommonResponse res = 1;
	optional GameResourcesResponse cgr = 2; // 消耗
}


// 装备觉醒 command:406
message AwakeningEquipmentResponse
{
    required CommonResponse res = 1;
    optional GameResourcesResponse cgr = 2; // 消耗
}


message PlayerResponse
{
    required int64 id = 1;
    required string nickname = 2;

}



// 套装属性
message SetEquipment{
	required int32 no = 1;  //套装NO
	optional int32 num = 2;  //套装激活数量
}

//强化数据格式
message EnhanceDataFormat{
	optional int32  before_lv = 1; //强化前等级
	optional int32 after_lv= 2; //强化后等级
	optional int32 cost_coin = 3; //强化消耗
}

// 装备
message EquipmentPB{
	required string id = 1; // 装备ID
	optional int32 no = 2;  // 装备NO
	optional int32 strengthen_lv = 3;  //装备强化等级
	optional int32 awakening_lv = 4;  //装备觉醒等级
	optional int32 nobbing_effect =7;  //装备锤炼效果
	optional int32 hero_no = 5;  //装备武将编号
	optional SetEquipment set = 6;
}


message LoginInfo
{
    required int32 login_day = 1;
    required int32 is_new_p = 2;
}

//  login gift info 825
message InitLoginGiftResponse{
	repeated int32 cumulative_received = 1;
	repeated int32 continuous_received = 2;
	required LoginInfo cumulative_day = 3;
	required LoginInfo continuous_day = 4;
}

// get login gift 826
message GetLoginGiftRequest{
	required int32 activity_id = 1;
	required int32 activity_type = 2;
}

message GetLoginGiftResponse{
	required bool result = 1;
	optional int32 result_no = 2;
    optional GameResourcesResponse gain = 3;
}
